# Vi和vim的使用

### 常用的三种模式

- `正常模式`  以vim打开一个档案就直接进入一般模式了（这里默认的模式）。在这个模式中，你可以使用【上下左右】按键来移动光标，你可以使用【删除字符】或【删除整行】来处理档案内容，也可以使用【复制 粘贴】来处理你的文件数据。
- `插入模式` 按下`i,I,o,O,a,A,r,R`等任何一个字母之后才会进入编辑模式，一般来说按i即可。
- `命令行模式` 在这个模式当中，可以提供你相关指令，完成读取、存盘、替换、离开vim、显示行号等动作则是在此模式中达成的！

> 切换方式：【i】 / 【ESC】/ 【:或者/】

### 常用快捷键使用

正常模式下：

- `yy`-复制当前行，`5yy`-复制当前行往下的5行，`P`-粘贴
- `dd`-删除当前行，`5dd`-删除当前行往下的5行。
- 【dd + p】剪切操作，dd作删除操作后，在光标所在位置按p 粘贴。 
- 【u】撤销
- 【G】【gg】可以快速定位到文件的未尾及首行
- 【g,】【g;】回到上次编辑的地方
- 【20 shift+g】可快速定位到20行
- 【v】进行逐字可视选择模式，复制局部内容：选中文本后按`y`
- 【gu】【gU】对选中的字符转换为小，大写。【gggUG】对整篇文章进行大写转换（`gg`,`gU`,`G` 三个命令的组合）【gUw/gU5w】转换光标后面的1个/5个单词为大写

命令行模式下:

- 在文件中查找某表单词命令行下 `/关键字`，回车查找，输入n就是找下一个。
- 设置和取消文件的行号。【:set nu】和【:set nonu】

查找替换：

- 【:1,$s/word1/word2/g】 从第一行到最后一行寻找word1替换成word2
- 【:1,$s/word1/\L&/g】 从第一行到最后一行寻找word1换成大写，【\L】小写【\U】大写。

`:[range]s/from/to/[flags]`

- [range] 说明

    - `:1,10s/from/to/` 表示在第1到第10行（包含第1，第10行）之间搜索替换；
    - `:10s/from/to/` 表示只在第10行搜索替换；
    - `:%s/from/to/` 表示在所有行中搜索替换；
    - `1,$s/from/to/` 同上。
- [flags] 说明

    - `c confirm`，每次替换前询问；
    - `e error`， 不显示错误；
    - `g globle`，不询问，整行替换。如果不加g选项，则只替换每行的第一个匹配到的字符串；
    - `i ignore`，忽略大小写。
- 例子
    - 删除行尾空格：`:%s/\s+$//g`
    - 删除行首多余空格：`%s/^\s*// 或者 %s/^ *//`
    - 删除沒有內容的空行：`%s/^$// 或者 g/^$/d`
    - 删除包含有空格组成的空行：`%s/^\s*$//` 或者 `g/^\s*$/d`
    - 删除以空格或TAB开头到结尾的空行：`%s/^[ |\t]*$// 或者 g/^[ |\t]*$/d`
    - 把文中的所有字符串“abc……xyz”替换为“xyz……abc”可以有下列写法：
    - `:%s/abc\(.*\)xyz/xyz\1abc/g`
    - `:%s/\(abc\)\(.*\)\(xyz\)/\3\2\1/g`

